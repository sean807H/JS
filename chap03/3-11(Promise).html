<html>

<head>
    <title>Promise</title>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    <script>
        // var x = 1;
        // var y = callServerDate();
        // var z = x + y;
        // console.log(z);     // 서버로부터 y값을 받아오기 전에 실행되면 에러가 발생

        var url = "https://78aeb894-7efa-4ce7-a6fe-5ef1b0f62dab.mock.pstmn.io/productList";

        // var data = axios.get(url).then(function (response) {
        //     console.log(response.data);
        // })

        function getData() {
            return new Promise(function (resolve, reject) {
                axios.get(url).then(function (response) {           // 정상적으로 데이터를 가져올떄까지 실행시키지 않음.then 이후에 가져옴
                    console.log(response.data);
                    resolve(response.data);
                    // reject(response.data);
                });
            });
        }

        var total = 0;

        getData().then(function (data) {
            for (var item of data.products) {
                total += item.price;
            }
            console.log(total);
        });

    </script>
</body>

</html>